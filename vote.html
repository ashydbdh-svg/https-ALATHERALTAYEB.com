
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام التصويت - جمعية الإبداع</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- الرأس -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-users"></i>
                <span>جمعية الإبداع</span>
            </div>
            <nav>
                <ul id="navMenu">
                    <li><a href="index.html" class="nav-link">الرئيسية</a></li>
                    <li><a href="news.html" class="nav-link">أخبار الجمعية</a></li>
                    <li><a href="vote.html" class="nav-link">التصويت</a></li>
                    <li><a href="login.html" class="nav-link">تسجيل الدخول</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- صفحة التصويت -->
    <section id="vote">
        <div class="container">
            <div class="section-title">
                <h2>نظام التصويت</h2>
                <p>يمكنك هنا المشاركة في التصويت على قرارات الجمعية أو انتخاب المدراء الجدد</p>
            </div>
            
            <div id="voteNotification" style="display: none; background: #ffebee; padding: 15px; border-radius: 5px; margin-bottom: 20px; text-align: center;">
                <p>التصويت غير مفعل حالياً. يرجى الانتظار حتى يقوم المدير بتفعيل التصويت.</p>
            </div>
            
            <div class="vote-section" id="voteSection">
                <h3>التصويت على انتخاب مدير جديد</h3>
                <p>يرجى اختيار أحد المرشحين أدناه:</p>
                
                <div class="vote-options">
                    <div class="vote-option" onclick="selectCandidate(this, 'أحمد محمد')">
                        <h4>أحمد محمد</h4>
                        <p>مرشح لديه خبرة 10 سنوات в управлении некоммерческими организациями</p>
                    </div>
                    <div class="vote-option" onclick="selectCandidate(this, 'فاطمة عبدالله')">
                        <h4>فاطمة عبدالله</h4>
                        <p>مرشحة متخصصة في تطوير المشاريع المجتمعية</p>
                    </div>
                    <div class="vote-option" onclick="selectCandidate(this, 'خالد سعيد')">
                        <h4>خالد سعيد</h4>
                        <p>مرشح حاصل على جوائز في العمل التطوعي</p>
                    </div>
                </div>
                
                <form id="voteForm">
                    <div class="form-group">
                        <label for="voterName">اسم المصوت</label>
                        <input type="text" id="voterName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="voterNumber">رقم العضوية</label>
                        <input type="text" id="voterNumber" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="membershipType">نوع العضوية</label>
                        <select id="membershipType" class="form-control" required>
                            <option value="">اختر نوع العضوية</option>
                            <option value="منتسب">منتسب</option>
                            <option value="مساهم">مساهم</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="voterNotes">ملاحظات المصوت (اختياري)</label>
                        <textarea id="voterNotes" class="form-control"></textarea>
                    </div>
                    
                    <button type="button" class="btn" onclick="submitVote()">إرسال التصويت</button>
                    <button type="button" class="btn" style="background: var(--accent-color);" onclick="generatePDF()">حفظ كملف PDF</button>
                </form>
                
                <div id="managerVoteControls" style="display: none; margin-top: 30px;">
                    <button type="button" class="btn" onclick="toggleVoting()" id="toggleVotingBtn">تفعيل التصويت</button>
                </div>
            </div>
            
            <div class="section-title">
                <h2>نتائج التصويتات السابقة</h2>
            </div>
            
            <div class="table-container">
                <table id="votesTable">
                    <thead>
                        <tr>
                            <th>القرار</th>
                            <th>تاريخ التصويت</th>
                            <th>عدد المصوتين</th>
                            <th>النسبة المؤيدة</th>
                            <th>الحالة</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- سيتم ملء هذا القسم عبر JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- الفوتر -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>عن الجمعية</h3>
                    <p>جمعية الإبداع هي منظمة غير ربحية تهدف إلى خدمة المجتمع وتنميته من خلال برامج ومشاريع متنوعة.</p>
                </div>
                
                <div class="footer-section">
                    <h3>روابط سريعة</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">الرئيسية</a></li>
                        <li><a href="#">عن الجمعية</a></li>
                        <li><a href="news.html">أخبار الجمعية</a></li>
                        <li><a href="vote.html">التصويت</a></li>
                        <li><a href="#">اتصل بنا</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>معلومات الاتصال</h3>
                    <p><i class="fas fa-map-marker-alt"></i> العنوان: المدينة، الحي، الشارع</p>
                    <p><i class="fas fa-phone"></i> الهاتف: 0123456789</p>
                    <p><i class="fas fa-envelope"></i> البريد: info@jamy3a.com</p>
                    
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>جميع الحقوق محفوظة &copy; جمعية الإبداع 2023</p>
                <p><a href="#" style="color: #ddd; text-decoration: none;">شروط الخدمة</a> | <a href="#" style="color: #ddd; text-decoration: none;">سياسة الخصوصية</a></p>
            </div>
        </div>
    </footer>

    <!-- زر الوضع الليلي -->
    <div class="theme-toggle" onclick="toggleDarkMode()">
        <i class="fas fa-moon"></i>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        // تحميل بيانات التصويت عند فتح الصفحة
        window.onload = function() {
            loadData();
            loadDarkMode();
            
            // إضافة class active للرابط الحالي
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === 'vote.html') {
                    link.classList.add('active');
                }
            });
            
            // التحقق إذا كان المستخدم مديراً
            const data = initializeData();
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const isManager = currentUser && data.managers.some(m => m.id === currentUser.id);
            
            if (isManager) {
                document.getElementById('managerVoteControls').style.display = 'block';
            }
        };
    </script>
</body>
</html>